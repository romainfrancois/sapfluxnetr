<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summaries by period — summarise_by_period • sapfluxnetr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Summaries by period — summarise_by_period" />

<meta property="og:description" content="This function collapse the TIMESTAMP to the desired period (day, month...)
by setting the same value to all timestamps within the period. This modified
TIMESTAMP is used to group by and summarise the data." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sapfluxnetr</a>
        <span class="version label label-warning" data-toggle="tooltip" data-placement="bottom" title="Not yet in CRAN">0.0.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/custom-aggregation.html">Custom aggregation</a>
    </li>
    <li>
      <a href="../articles/data-flags.html">Data Flags</a>
    </li>
    <li>
      <a href="../articles/memory-and-parallelization.html">Memory and Parallelization</a>
    </li>
    <li>
      <a href="../articles/metadata-and-data-units.html">Metadata and Data units</a>
    </li>
    <li>
      <a href="../articles/sapfluxnetr-quick-guide.html">sapfluxnetr (Not So) Quick Guide</a>
    </li>
    <li>
      <a href="../articles/sfn-data-classes.html">sfn_data classes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sapfluxnet/sapfluxnetr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summaries by period</h1>
    <small class="dont-index">Source: <a href='https://github.com/sapfluxnet/sapfluxnetr/blob/master/R/metrics.R'><code>R/metrics.R</code></a></small>
    <div class="hidden name"><code>summarise_by_period.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function collapse the TIMESTAMP to the desired period (day, month...)
by setting the same value to all timestamps within the period. This modified
TIMESTAMP is used to group by and summarise the data.</p>
    
    </div>

    <pre class="usage"><span class='fu'>summarise_by_period</span>(<span class='no'>data</span>, <span class='no'>period</span>, <span class='no'>.funs</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>sapflow or environmental data as obtained by <code><a href='sfn_get_generics.html'>get_sapf_data</a></code>
and <code><a href='sfn_get_generics.html'>get_env_data</a></code>. Must have a column named TIMESTAMP</p></td>
    </tr>
    <tr>
      <th>period</th>
      <td><p>tibbletime::collapse_index period</p></td>
    </tr>
    <tr>
      <th>.funs</th>
      <td><p>dplyr::summarise_all funs</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>optional arguments for <code>link{summarise_by_period}</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A `tbl_time` object with the metrics results. The names of the columns
  indicate the original variable (tree or environmental variable) and the
  metric calculated (i.e. `vpd_mean`)</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function uses internally <code><a href='https://www.rdocumentation.org/packages/tibbletime/topics/collapse_index'>collapse_index</a></code> and
<code><a href='https://dplyr.tidyverse.org/reference/summarise_all.html'>summarise_all</a></code> and arguments to control these functions
can be passed as `...`. Arguments for each function are spliced and applied
when needed. Be advised that all arguments passed to the summarise_all function
will be applied to all the summarising functions used, so it will fail if any
of that functions does not accept that argument. To complex function-argument
relationships, indicate each summary function call within the <code>.funs</code>
argument with <code><a href='https://dplyr.tidyverse.org/reference/funs.html'>funs</a></code>:</p><pre>
# This will fail beacuse na.rm argument will be also passed to the n function,
# which does not accept any argument:
summarise_by_period(
  data = get_sapf_data(ARG_TRE),
  period = '7 days',
  .funs = funs(mean, sd, n),
  na.rm = TRUE
)
    # to solve this is better to use the .funs argument:
summarise_by_period(
  data = get_sapf_data(ARG_TRE),
  period = '7 days',
  .funs = funs(mean(., na.rm = TRUE), sd(., na.rm = TRUE), n())
)
</pre>
    
    <h2 class="hasAnchor" id="timestamp-coll"><a class="anchor" href="#timestamp-coll"></a>TIMESTAMP_coll</h2>

    
    <p>Previously to the collapsing step, a temporal variable called
  <code>TIMESTAMP_coll</code> is created to be able to catch the real timestamp when
  some events happens, for example to use the <code>min_time</code> function. If
  your custom summarise function needs to get the time at which some event
  happens, use TIMESTAMP_coll instead of TIMESTAMP for that:</p><pre>
    min_time &lt;- function(x, time) {
      time[which.min(x)]
    }
    summarise_by_period(
      data = get_sapf_data(ARG_TRE),
      period = 'daily',
      .funs = funs(min_time, time = TIMESTAMP_coll) # Not TIMESTAMP
    )
  </pre>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>dplyr</span>)

<span class='co'># data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='st'>'ARG_TRE'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>'sapfluxnetr'</span>)

<span class='co'># simple summary</span>
<span class='fu'>summarise_by_period</span>(
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='sfn_get_generics.html'>get_sapf_data</a></span>(<span class='no'>ARG_TRE</span>),
  <span class='kw'>period</span> <span class='kw'>=</span> <span class='st'>'7 days'</span>,
  <span class='kw'>.funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/funs.html'>funs</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/mean'>mean</a></span>(<span class='no'>.</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/sd'>sd</a></span>(<span class='no'>.</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>), <span class='fu'><a href='https://dplyr.tidyverse.org/reference/n.html'>n</a></span>())
)</div><div class='output co'>#&gt; # A time tibble: 3 x 13
#&gt; <span style='color: #949494;'># Index: TIMESTAMP</span><span>
#&gt;   TIMESTAMP           ARG_TRE_Nan_Jt_… ARG_TRE_Nan_Jt_… ARG_TRE_Nan_Jt_…
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;dttm&gt;</span><span>                         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> 2009-11-15 </span><span style='color: #949494;'>00:00:00</span><span>             433.             300.             346.
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> 2009-11-22 </span><span style='color: #949494;'>00:00:00</span><span>             522.             364.             460.
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> 2009-11-29 </span><span style='color: #949494;'>00:00:00</span><span>             374.             286.             365.
#&gt; </span><span style='color: #949494;'># … with 9 more variables: ARG_TRE_Nan_Jt_4_mean </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   ARG_TRE_Nan_Jt_1_sd </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, ARG_TRE_Nan_Jt_2_sd </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   ARG_TRE_Nan_Jt_3_sd </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, ARG_TRE_Nan_Jt_4_sd </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>,
#&gt; #   ARG_TRE_Nan_Jt_1_n </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span style='color: #949494;'>, ARG_TRE_Nan_Jt_2_n </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span style='color: #949494;'>,
#&gt; #   ARG_TRE_Nan_Jt_3_n </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span style='color: #949494;'>, ARG_TRE_Nan_Jt_4_n </span><span style='color: #949494;font-style: italic;'>&lt;int&gt;</span><span></div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#timestamp-coll">TIMESTAMP_coll</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Víctor Granda, Rafael Poyatos, Víctor Flo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

